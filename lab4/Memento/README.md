# Memento

## Огляд шаблону Memento

Шаблон Memento використовується для збереження стану об'єкта (знімка) у певний момент часу, щоб його можна було відновити пізніше. У цій реалізації текстовий редактор зберігає історію змін документа, дозволяючи скасовувати останні дії (наприклад, додавання тексту або очищення документа).

Основні компоненти шаблону:
- **Originator**: Об'єкт, чий стан потрібно зберігати та відновлювати.
- **Memento**: Об'єкт, що зберігає стан Originator.
- **Caretaker**: Об'єкт, який керує історією знімків, зберігаючи та повертаючи їх за потреби.

## Структура коду


### 1. Клас `TextDocument` (Originator)

- **Опис**: Представляє документ, з яким працює редактор. Зберігає текстовий вміст і відповідає за створення та відновлення знімків стану.
- **Поля**:
  - `_content` (string): Зберігає текстовий вміст документа.
- **Методи**:
  - `Write(string text)`: Додає текст до вмісту документа.
  - `Erase()`: Очищає весь вміст документа.
  - `GetContent()`: Повертає поточний вміст документа.
  - `Save()`: Створює знімок поточного стану (`Memento`) і повертає його.
  - `Restore(Memento memento)`: Відновлює стан документа з переданого знімка.
- **Внутрішній клас `Memento`**:
  - Зберігає стан документа (вміст `_content`) у момент створення.
  - Поле `_state` (string): Зберігає копію вмісту документа.
  - Конструктор: Приймає стан і ініціалізує `_state`.
  - Модифікатор `internal` забезпечує доступ до `_state` лише в межах `TextDocument` і пов’язаних класів.

### 2. Клас `TextEditor` (Caretaker)

- **Опис**: Керує роботою з документом і історією змін. Виконує роль опікуна, зберігаючи знімки стану документа в стеку.
- **Поля**:
  - `_document` (`TextDocument`): Екземпляр документа, з яким працює редактор.
  - `_history` (`Stack<TextDocument.Memento>`): Стек для зберігання знімків стану документа.
- **Методи**:
  - `Type(string text)`: Зберігає поточний стан документа в історії, а потім додає текст до документа.
  - `Clear()`: Зберігає поточний стан у історії, а потім очищає документ.
  - `Undo()`: Відновлює попередній стан документа, виймаючи останній знімок зі стеку.
  - `Show()`: Виводить поточний вміст документа в консоль.

### 3. Клас `Program`

- **Опис**: Демонструє роботу текстового редактора через послідовність операцій.
- **Логіка**:
  - Створює екземпляр `TextEditor`.
  - Виконує операції: додавання тексту (`Type`), виведення вмісту (`Show`), скасування змін (`Undo`), очищення документа (`Clear`), і повторне скасування.
  - Встановлює кодування консолі на UTF-8 для коректного відображення тексту.

## Як працює шаблон Memento

1. **Збереження стану**:
   - Перед кожною зміною документа (`Type` або `Clear`) `TextEditor` викликає `Save` у `TextDocument`, створюючи знімок (`Memento`), який зберігається в стеку `_history`.
   - Знімок містить копію вмісту документа на момент збереження.

2. **Відновлення стану**:
   - При виклику `Undo` редактор виймає останній знімок зі стеку і передає його методу `Restore` документа.
   - Метод `Restore` замінює поточний вміст документа на стан, збережений у знімку.

3. **Керування історією**:
   - Стек `_history` дозволяє зберігати послідовність станів, забезпечуючи можливість багаторазового скасування змін.
   - Якщо стек порожній, `Undo` не виконує жодних дій.

## Особливості реалізації

- **Інкапсуляція**: Внутрішній клас `Memento` із модифікатором `internal` забезпечує доступ до стану лише для `TextDocument` і `TextEditor`, зберігаючи інкапсуляцію.
- **Простота**: Реалізація зосереджена на базовій функціональності текстового редактора з підтримкою скасування.
- **Масштабованість**: Стек історії дозволяє легко розширити систему, наприклад, додавши функцію повтору дій (redo) через додатковий стек.

